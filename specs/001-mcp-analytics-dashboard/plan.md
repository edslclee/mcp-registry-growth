# Implementation Plan: MCP Server Analytics Dashboard

**Branch**: `001-mcp-analytics-dashboard` | **Date**: 2025-10-28 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/001-mcp-analytics-dashboard/spec.md`

**Note**: This template is filled in by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Building a static Next.js dashboard that visualizes MCP server growth analytics. A GitHub Actions workflow runs hourly to fetch and aggregate server data from the MCP Registry API into a CSV file. The Next.js app reads this CSV at build time and renders interactive time-series charts with filtering (local/remote servers) and granularity options (hourly/daily/weekly/monthly). The site features a dark theme with purple/blue/pink color scheme using ShadCN UI components.

## Technical Context

**Language/Version**: TypeScript with Next.js 14+ (App Router)
**Primary Dependencies**: Next.js, React 18+, ShadCN UI components, NEEDS CLARIFICATION: charting library selection
**Storage**: CSV files generated by GitHub Actions, committed to repository
**Testing**: NEEDS CLARIFICATION: testing framework not specified in requirements
**Target Platform**: Static export for any hosting provider (Vercel, Netlify, GitHub Pages, etc.)
**Project Type**: Web (static site with client-side interactivity)
**Performance Goals**: Page load <3 seconds, filter changes <1 second, bundle size <2MB
**Constraints**: Static site only (no server-side runtime), must work offline after initial load, responsive 320px-4K
**Scale/Scope**: Displaying 1000+ data snapshots, hourly GitHub Actions runs, single-page app with About page

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### I. Static Site ✅ PASS

**Requirement**: All content generated at build time, no server-side runtime

**Compliance**:
- ✅ Next.js static export configured
- ✅ Data aggregation happens via GitHub Actions (build-time)
- ✅ CSV files committed to repository, read at build time
- ✅ Charts rendered client-side using JavaScript
- ✅ No API calls at runtime (all data pre-aggregated)

**Verification**: Next.js `output: 'export'` configuration will generate pure static HTML/CSS/JS

### II. Responsive Design ✅ PASS

**Requirement**: Optimal experience from 320px to 4K displays

**Compliance**:
- ✅ ShadCN UI components are responsive by default
- ✅ Success criteria SC-002 explicitly requires 320px-4K support
- ✅ Functional requirement FR-015 mandates responsive design
- ✅ Chart library selection (Phase 0) will prioritize responsive capabilities

**Verification**: Will be tested across breakpoints during implementation

### III. Minimal Dependencies ⚠️ REQUIRES JUSTIFICATION

**Requirement**: Avoid dependencies unless clearly justified

**Dependencies Proposed**:

1. **Next.js** (Required)
   - **Problem**: Need static site generation, routing, and build optimization
   - **Value**: Industry-standard React framework, optimized static exports, built-in performance
   - **Alternatives**: Vanilla React (requires custom build setup), Gatsby (heavier), Astro (less React ecosystem)
   - **Justification**: Next.js is the most mature, well-maintained option for React-based static sites
   - **Bundle Impact**: ~85KB gzipped for runtime

2. **React 18** (Required by Next.js)
   - **Problem**: Component-based UI with state management
   - **Value**: Enables ShadCN components, efficient re-rendering for filters/granularity changes
   - **Justification**: Required peer dependency of Next.js, industry standard

3. **ShadCN UI** (Specified by user)
   - **Problem**: Need accessible, themeable UI components
   - **Value**: Copy-paste components (not installed dependency), built on Radix UI primitives
   - **Bundle Impact**: Only includes components actually used (~10-30KB per component)
   - **Justification**: User-specified, minimal footprint since it's not a package dependency

4. **Recharts** (Selected in Phase 0)
   - **Problem**: Rendering time-series data with interactive filtering
   - **Value**: Native React components, D3.js foundation, responsive by default
   - **Alternatives Evaluated**: Chart.js (65KB, imperative), Victory (180KB, too heavy), Vanilla Canvas (30KB, excessive dev time)
   - **Justification**: Best balance of developer experience and bundle size
   - **Bundle Impact**: ~95KB gzipped
   - **Decision**: Approved per research.md analysis

**Total Bundle Size**: ~305KB gzipped (Next.js 85KB + React (included) + ShadCN 75KB + Recharts 95KB + App code 50KB)

**Gate Status**: ✅ **PASS** - All dependencies justified, total bundle 305KB << 2MB budget (85% under limit)

### Constitution Check Summary (Post-Design)

| Principle | Status | Notes |
|-----------|--------|-------|
| Static Site | ✅ PASS | Architecture fully static, verified in design |
| Responsive Design | ✅ PASS | Recharts + ShadCN both responsive |
| Minimal Dependencies | ✅ PASS | 4 dependencies justified, 305KB total |

**Final Gate**: ✅ **PASS** - All principles satisfied, ready for implementation

## Project Structure

### Documentation (this feature)

```text
specs/[###-feature]/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
.github/
└── workflows/
    └── aggregate-data.yml          # Hourly GitHub Actions workflow

data/
└── snapshots.csv                   # Generated by GitHub Actions, contains time-series data

scripts/
└── aggregate-servers.ps1           # PowerShell script to fetch and aggregate MCP Registry data

app/                                # Next.js App Router
├── layout.tsx                      # Root layout with dark theme
├── page.tsx                        # Dashboard page (main charts)
├── about/
│   └── page.tsx                    # About page
└── globals.css                     # Global styles (dark theme, purple/blue/pink)

components/                         # React components
├── ui/                            # ShadCN UI components (shadcn-ui CLI generated)
│   ├── button.tsx
│   ├── card.tsx
│   ├── select.tsx
│   └── ...
├── charts/
│   └── time-series-chart.tsx      # Reusable time-series chart component
├── filters/
│   ├── server-type-filter.tsx     # Local/Remote/All filter
│   └── granularity-selector.tsx   # Hourly/Daily/Weekly/Monthly selector
└── navigation/
    └── nav.tsx                     # Navigation between Dashboard and About

lib/
├── data-loader.ts                  # CSV parsing and data loading
├── data-aggregator.ts              # Client-side aggregation by granularity
└── types.ts                        # TypeScript types for data structures

public/
└── (static assets if needed)
```

**Structure Decision**: Next.js App Router structure selected because:
- Feature is web-only (no backend/API needed beyond GitHub Actions)
- App Router provides native support for static export
- Component co-location aligns with React best practices
- GitHub Actions and PowerShell script handle data aggregation separately

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

No violations - all principles pass or have conditional approval pending research.
